<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noradrenaline calculator</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Header with Title -->
  <header class="banner">
    Noradrenaline calculator
  </header>

  <!-- Weight Entry Group -->
  <div class="input-group">
    <label for="weight">Weight (kg):</label>
    <input type="number" id="weight" placeholder="0" min="0">
  </div>
  <p class="input-note">Use ideal body weight if BMI ≥ 35 kg/m²</p>

  <!-- Noradrenaline/Adrenaline selection buttons -->
  <div class="la-buttons">
    <button id="NoradBtn" onclick="selectDrug('Noradrenaline')">Noradrenaline</button>
    <button id="AdBtn" onclick="selectDrug('Adrenaline')">Adrenaline</button>
  </div>

  <!-- Dose Bubbles -->
  <div class="dose-options">
    <div class="dose-bubble" onclick="selectDose(this)">
      4mg in 50ml
      <small>0.08 mg/mL</small>
    </div>
    <div class="dose-bubble" onclick="selectDose(this)">
      8mg in 50ml
      <small>0.16 mg/mL</small>
    </div>
    <div class="dose-bubble" onclick="selectDose(this)">
      16mg in 50ml
      <small>0.32 mg/mL</small>
    </div>
  </div>

  <!-- Home and Reset Buttons -->
  <div class="button-container">
    <button type="button" class="reset-btn" onclick="resetForm()">Reset</button>
    <button type="button" class="home-btn" onclick="goHome()">Home</button>
  </div>

  <!-- Footer -->
  <footer>
    <small>&copy; 2025 #OneTeam Anaesthesia. All rights reserved.</small>
  </footer>

<script>
  let selectedDrug = null;
  let selectedDose = null;

  const doseData = {
    "4mg in 50ml": 0.08,
    "8mg in 50ml": 0.16,
    "16mg in 50ml": 0.32
  };

  function goHome() {
    window.location.href = "index.html";
  }

  function selectDrug(drug) {
    const noradBtn = document.getElementById('NoradBtn');
    const adBtn = document.getElementById('AdBtn');

    if (selectedDrug === drug) {
      // Deselect if already selected
      selectedDrug = null;
      noradBtn.classList.remove('la-buttons button.active');
      adBtn.classList.remove('la-buttons button.active');
    } else {
      selectedDrug = drug;
      noradBtn.classList.toggle('la-buttons button.active', drug === 'Noradrenaline');
      adBtn.classList.toggle('la-buttons button.active', drug === 'Adrenaline');
    }
  }

  function selectDose(element) {
    const label = element.childNodes[0].textContent.trim();

    if (selectedDose?.label === label) {
      // Deselect if already selected
      selectedDose = null;
      element.classList.remove('selected');
    } else {
      // Clear other selections
      document.querySelectorAll('.dose-bubble').forEach(bubble => {
        bubble.classList.remove('selected');
      });

      // Highlight this one
      element.classList.add('selected');
      selectedDose = {
        label: label,
        concentration: doseData[label]
      };
    }
  }

  function resetForm() {
    // Clear weight input and placeholder
    const weightInput = document.getElementById('weight');
    weightInput.value = '';
    weightInput.placeholder = '0';

    // Clear drug selection
    document.getElementById('NoradBtn').classList.remove('la-buttons button.active');
    document.getElementById('AdBtn').classList.remove('la-buttons button.active');
    selectedDrug = null;

    // Clear dose selection
    document.querySelectorAll('.dose-bubble').forEach(bubble => {
      bubble.classList.remove('selected');
    });
    selectedDose = null;
  }

  function getSelectedInputs() {
    const weight = parseFloat(document.getElementById('weight').value);
    return {
      weight,
      selectedDrug,
      selectedDose
    };
  }
</script>
</body>
</html>
